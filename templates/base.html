{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJCRM</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Base styles */
        body {
            background-color: #E3FEF7;
            padding-top: 80px;
            /* Same as the header height */
        }

        
    </style>
</head>

<body style="background-color: #E3FEF7">
    {% include "navbar.html" %}
    
    <!-- Message block -->
    {% if messages %}
    <div class="alert-messages">
        {% for message in messages %}
        <div id="message-{{ forloop.counter }}"
            class="alert bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
            {{ message }}
            <!-- Close button -->
            <span class="absolute top-0 right-0 px-4 py-3 cursor-pointer close-alert"
                onclick="this.parentElement.style.display='none';">
                &times;
            </span>
        </div>
        {% endfor %}
    </div>
    <script>
        // Automatically hide the alert after 5 seconds
        setTimeout(function () {
            var alerts = document.getElementsByClassName('alert');
            for (var i = 0; i < alerts.length; i++) {
                alerts[i].style.display = 'none';
            }
        }, 5000); // 5000 milliseconds = 5 seconds
    </script>
    {% endif %}
    {% block content %}
    {% endblock content %}
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Include jQuery and Bootstrap Datepicker JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script>
        $(document).ready(function () {
            // Toggle Sidebar
            $('#hamburger').click(function () {
                $('#sidebar').addClass('active');
            });
            // Close sidebar when clicking outside of it
            $(document).click(function (event) {
                if (!$(event.target).closest('#sidebar, #hamburger, #close-button').length) {
                    $('#sidebar').removeClass('active');
                    $('#sidebar').css('transform', 'translateX(-100%)'); // Adjusts for CSS transform
                }
            });

            // On page load, check for saved theme preference
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'night') {
                themeStyle.setAttribute('href', "{% static 'CSS/night_mode.css' %}");
                $('body').addClass('night-mode'); // Set body class to night mode
                themeIcon.innerHTML = '&#9729;'; // Set icon to Moon
            }
        });
        // Toggle nested menu for Sales
        $('#toggle-sales-menu').on('click', function (e) {
            e.preventDefault(); // Prevent default link behavior
            $('#sales-menu').slideToggle(); // Slide toggle for the nested menu
        });

        // Toggle nested menu for Leads
        $('#toggle-leads-menu').on('click', function (e) {
            e.preventDefault(); // Prevent default link behavior
            $('#leads-menu').slideToggle(); // Use slideToggle for animation
        });

        // Toggle nested menu for Properties
        $('#toggle-properties-menu').on('click', function (e) {
            e.preventDefault(); // Prevent default link behavior
            $('#properties-menu').slideToggle(); // Use slideToggle for animation
        });


    </script>
</body>
</html>